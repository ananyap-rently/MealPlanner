<div class="container" data-controller="meal-plans">
  <h1>Meal Plans</h1>

  <!-- Error messages container -->
  <div data-meal-plans-target="errors"></div>

  <!-- Create New Meal Plan Form -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Create New Meal Plan</h3>
    </div>
    <div class="card-body">
      <form data-meal-plans-target="form" data-action="submit->meal-plans#submit">
        <div class="form-group mb-3">
          <label for="meal_plan_category">Category</label>
          <input 
            type="text" 
            id="meal_plan_category"
            class="form-control" 
            placeholder="e.g., Weekly, Special Diet, Holiday"
            data-meal-plans-target="categoryInput"
            required>
        </div>

        <div class="form-group mb-3">
          <label for="meal_plan_start_date">Start Date</label>
          <input 
            type="date" 
            id="meal_plan_start_date"
            class="form-control" 
            value="<%= Date.today %>"
            data-meal-plans-target="startDateInput"
            required>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary"
          data-meal-plans-target="submitBtn">
          Create Meal Plan
        </button>
      </form>
    </div>
  </div>

  <!-- List of Existing Meal Plans -->
  <div class="card">
    <div class="card-header">
      <h3>Your Meal Plans</h3>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Category</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Created By</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody data-meal-plans-target="tableBody">
          <!-- Meal plans will be loaded here via JavaScript -->
        </tbody>
      </table>

      <div data-meal-plans-target="emptyState" style="display: none;">
        <p class="text-muted">No meal plans yet. Create your first one above!</p>
      </div>
    </div>
  </div>
</div>

<!-- Store current user ID for permission checks -->
<% if current_user %>
  <script>
    document.body.dataset.currentUserId = '<%= current_user.id %>';
  </script>
<% end %>